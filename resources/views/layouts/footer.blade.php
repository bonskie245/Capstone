 
<br>
<br>
    <footer class="main-footer" >
    <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
      <b>Version</b> 3.2.0
    </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

        

        <div class="modal fade apps-modal" id="appsModal" tabindex="-1" role="dialog" aria-labelledby="appsModalLabel" aria-hidden="true" data-backdrop="false">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="ik ik-x-circle"></i></button>
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="quick-search">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-4 ml-auto mr-auto">
                                    <div class="input-wrap">
                                        <input type="text" id="quick-search" class="form-control" placeholder="Search..." />
                                        <i class="ik ik-search"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-body d-flex align-items-center">
                        <div class="container">
                            <div class="apps-wrap">
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-bar-chart-2"></i><span>Dashboard</span></a>
                                </div>
                                <div class="app-item dropdown">
                                    <a href="#" class="dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="ik ik-command"></i><span>Ui</span></a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-mail"></i><span>Message</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-users"></i><span>Accounts</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-shopping-cart"></i><span>Sales</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-briefcase"></i><span>Purchase</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-server"></i><span>Menus</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-clipboard"></i><span>Pages</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-message-square"></i><span>Chats</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-map-pin"></i><span>Contacts</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-box"></i><span>Blocks</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-calendar"></i><span>Events</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-bell"></i><span>Notifications</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-pie-chart"></i><span>Reports</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-layers"></i><span>Tasks</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-edit"></i><span>Blogs</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-settings"></i><span>Settings</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-more-horizontal"></i><span>More</span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>window.jQuery || document.write('<script src="src/js/vendor/jquery-3.3.1.min.js"><\/script>')</script>
        <script src="{{asset('template/plugins/popper.js/dist/umd/popper.min.js')}}"></script>
        <script src="{{asset('template/plugins/bootstrap/dist/js/bootstrap.min.js')}}"></script>
        <script src="{{asset('template/plugins/perfect-scrollbar/dist/perfect-scrollbar.min.js')}}"></script>
        <script src="{{asset('template/plugins/screenfull/dist/screenfull.js')}}"></script>
        <script src="{{asset('template/plugins/datatables.net/js/jquery.dataTables.min.js')}}"></script>
        <script src="{{asset('template/plugins/datatables.net-bs4/js/dataTables.bootstrap4.min.js')}}"></script>
        <script src="{{asset('template/plugins/datatables.net-responsive/js/dataTables.responsive.min.js')}}"></script>
        <script src="{{asset('template/plugins/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js')}}"></script>
        <script src="{{asset('template/plugins/jvectormap/jquery-jvectormap.min.js')}}"></script>
        <script src="{{asset('plugins/datedropper/datedropper.min.js')}}"></script>
        <script src="{{asset('template/plugins/jvectormap/tests/assets/jquery-jvectormap-world-mill-en.js')}}"></script>
        <script src="{{asset('template/plugins/moment/moment.js')}}"></script>
        <script src="{{asset('template/plugins/tempusdominus-bootstrap-4/build/js/tempusdominus-bootstrap-4.min.js')}}"></script>
        <script src="{{asset('template/plugins/d3/dist/d3.min.js')}}"></script>
        <script src="{{asset('template/plugins/c3/c3.min.js')}}"></script>
        <script src="{{asset('template/js/tables.js')}}"></script>
        <script src="{{asset('template/js/widgets.js')}}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="{{asset('template/dist/js/theme.min.js')}}"></script>
        <script src="{{asset('assets/demo/chart-bar-demo.js')}}"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>

        
        <!-- Data TAbles  April 4, 23-->
        <script>
            $(document).ready(function () {
                $('#data_tables').DataTable({
                    pagingType: 'full_numbers',
                    rowReorder: {
                        selector: 'td:nth-child(2)'
                    },
                    responsive: true
                });
            });
            $(document).ready(function(){
                $('#data_confirmed').DataTable({
                    pagingType: 'full_numbers',
                    rowReorder: {
                        selector: 'td:nth-child(2)'
                    },
                    responsive: true
                });
               
            })

            $(document).ready(function(){
                $('#data_declined').DataTable({
                    pagingType: 'full_numbers',
                    rowReorder: {
                        selector: 'td:nth-child(2)'
                    },
                    responsive: true
                });          
            });

            $(document).ready(function(){
                $('#data_cancelled').DataTable({
                    pagingType: 'full_numbers',
                    rowReorder: {
                        selector: 'td:nth-child(2)'
                    },
                    responsive: true
                });          
            });
            
            
           
        </script>
        <!-- End of Datatables -->
    <!-- Start of Edit Booking-->
    @if(isset($daters))
    <script> 
        $(document).ready(function(){   
            // ..Start of Ajax GET
            $.ajaxSetup(
            {
                    headers: 
                    {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                    }
            });

            
            var doctorId =  $('#doctorID').val();
            var dates= @json($daters);
            
            console.log(doctorId);
            
            var op = dates.map(function(item)
            {
                return item.app_date;
            });
            // Check Point April 11, 2023
            $("#datepickers").datepicker({
                dateFormat: 'yy-mm-dd',
                showButtonPanel: true,
                altField: "#alternate",
                altFormat: "mm-dd-yy",
                minDate: new Date(),
                beforeShowDay: function(date)
                {
                    var sdate = moment(date).format('YYYY-MM-DD');

                    if ($.inArray(sdate, op) !== -1) {
                        return [true];
                    }
                    else{
                        return [false,'red']; 
                    }
                },
                onSelect: function(date)
                {
                    $.ajax({
                            type: 'GET',
                            url: "{{route('booking.editTime')}}",
                            data: {date, doctorId},
                            success: function(data) 
                            {
                                console.log(data)
                                var result = " ";
                                for(var i = 0; i < data.length; i++)
                                {
                                    result += "<div class='form-group col'> <label class='btn btn-outline-primary'> <input type='radio' id='app_id' class='form-control is-invalid' id='validationServer03'  name='app_id' value='"
                                    + data[i].id +"'required> <span>"
                                    + moment(data[i].time_start, 'HH:mm A').format('hh:mm A') +" - " 
                                    + moment(data[i].time_end, 'HH:mm A').format('hh:mm A')+"</span></label> </div>";
                                }
                                    $('#result').html(result);
                            },
                        });
                        // end ajax  
                },
            });                
        });
    </script>

    <!-- End of Edit Booking -->
    @endif
        @if(isset($dates))
    <script>
        $(document).ready(function(){
            $.ajaxSetup(
            {
                    headers: 
                    {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                    }
            });

            var dates= @json($dates);
                    // Select Doctor
        
        
        $("#Id").click(function()
        { 
            var doctorId = $("input[name='doctorId']:checked").val();
            var title = $('#doctorName').val();

            console.log(title)
            // Ajax Start
            $.ajax({
                type: 'GET',
                url: "{{route('users.create')}}",
                data: {doctorId},
                success: function(data) 
                {
                    var op = data.map(function(item)
                    {
                        return item.app_date;
                    });
                
                    
                    console.log(op)
                    $('#myModal').modal({backdrop: 'static', keyboard: false});
                    $('#myModal').find('#title').text(title);
                    $("#myModal").modal('show');

                    $("#datepicker").datepicker({
                    dateFormat: 'yy-mm-dd',
                    showButtonPanel: true,
                    altField: "#alternate",
                    altFormat: "mm-dd-yy",
                    minDate: new Date(),
                    beforeShowDay: function(date)
                    {
                        var sdate = moment(date).format('YYYY-MM-DD');

                        if ($.inArray(sdate, op) !== -1) {
                            return [true];
                        }
                        else{
                            return [false,'red']; 
                        }
                    },
                    onSelect: function (date) 
                    {                                   
                        // start ajax
                        $.ajax({
                            type: 'GET',
                            url: "{{route('users.create')}}",
                            data: {date, doctorId},
                            success: function(data) 
                            {
                                console.log(data)
                                var result = " ";
                                for(var i = 0; i < data.length; i++)
                                {
                                    result += "<div class='form-group col'> <label class='btn btn-outline-primary'> <input type='radio' id='app_id' class='form-control is-invalid' id='validationServer03'  name='app_id' value='"
                                    + data[i].id +"'required> <span>"
                                    + moment(data[i].time_start, 'HH:mm A').format('hh:mm A') +" - " 
                                    + moment(data[i].time_end, 'HH:mm A').format('hh:mm A')+"</span></label> </div>";
                                }
                                    $('#result').html(result);
                            },
                        });
                        // end ajax
                    },
                    // End Onselect
                    });
            // end datepicker    
                },
            });
            // End Ajax

        });                     
            // end datepicker
        });

      
            //Others
        function yesnoCheck(that)
        {
            if (that.value == "other") {
                document.getElementById("ifYes").style.display = "block";
            } else {
                document.getElementById("ifYes").style.display = "none";
            }
        }
        // end others

        // CheckBox
        var expanded = false;

            function showCheckboxes() {
            var checkboxes = document.getElementById("checkboxes");
            if (!expanded) {
                checkboxes.style.display = "block";
                expanded = true;
            } else {
                checkboxes.style.display = "none";
                expanded = false;
            }
            }
        // End CheckBox
        </script>  
        @endif          
        <!-- @if (count($errors) > 0)
            <script type="text/javascript">
                $( document ).ready(function() {
                    $('#myModal').modal('show');
                });
            </script>
            @endif -->
        <script>
             $(function()
            {
                    $("#close").on('click', function() 
                    {
                        $('#myModal').modal('hide');
                        window.location.reload();
                    });

                    $("#closeX").on('click', function() 
                    {
                        $('#myModal').modal('hide');
                        window.location.reload();
                    });
            
            });
        // <!-- Last Checkpoint March 29, 2023 For Update Time -->
        $(function()
        {
            $("#yes").on('click', function()
            {
                $('#doctor').toggle();
                $('#option').hide();
            }); 
            
            $("#no").on('click', function()
            {
                var doctorId = $("input[name='doctorId']").val();
                var title = $('#doctorName').val();
                // ..Start of Ajax GET
                $.ajax({
                    type: 'GET',
                    url: "{{route('booking.editTime')}}",
                    data: {doctorId},
                    success:function(data)
                    {
                        var op = data.map(function(item)
                        {
                        return item.app_date;
                        });
        
                        console.log(op)
                        // console.log(available)
                        $('#myModal').modal({backdrop: 'static', keyboard: false});
                        $('#myModal').find('#title').text(title);
                        $("#myModal").modal('show');

                        $("#datepicker").datepicker({
                        dateFormat: 'yy-mm-dd',
                        showButtonPanel: true,
                        altField: "#alternate",
                        altFormat: "mm-dd-yy",
                        minDate: new Date(),
                        beforeShowDay: function(date)
                        {
                            var sdate = moment(date).format('YYYY-MM-DD');

                            if ($.inArray(sdate, op) !== -1) {
                                return [true];
                            }
                            else{
                                return [false,'red']; 
                            }
                        },
                        onSelect: function (date) 
                        {  
                            // start ajax
                        $.ajax({
                            type: 'GET',
                            url: "{{route('booking.editTime')}}",
                            data: {date, doctorId},
                            success: function(data) 
                            {
                                console.log(data)
                                var result = " ";
                                for(var i = 0; i < data.length; i++)
                                {
                                    result += "<div class='form-group col-md-6'> <label class='btn btn-outline-primary'> <input type='radio' id='app_id' class='form-control is-invalid' id='validationServer03'  name='app_id' value='"
                                    + data[i].id +"'required> <span>"
                                    + moment(data[i].time_start, 'HH:mm A').format('hh:mm A') +" - " 
                                    + moment(data[i].time_end, 'HH:mm A').format('hh:mm A')+"</span></label> </div>";
                                }
                                    $('#result').html(result);
                            },
                        });
                        // end ajax                                                         
                        },
                        // End Onselect
                        });
                        // End Date

                    },
                    error:function(error)
                    {

                    }
                });
                // End Of ajax Query GET
                
            }); 
        });
    </script>
         
           <!-- Print PDF -->
           <!-- <script>
            function createPDF() 
            {
                var pdf = new jspdf('l', 'px', 'a4');
                // source can be HTML-formatted string, or a reference
                // to an actual DOM element from which the text will be scraped.
                source = $('#tab')[0];
                pdf.canvas.height = 72 * 11.69;
                pdf.canvas.width = 72 * 8.27;


                pdf.setFontSize(22);
                
               
                pdf.text(22, 22, 'Appointment History');
                

                // we support special element handlers. Register them with jQuery-style 
                // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
                // There is no support for any other type of selectors 
                // (class, of compound) at this time.
                specialElementHandlers = {
                // element with id of "bypass" - jQuery style selector
                    '#bypassme': function (element, renderer) 
                    {
                            // true = "handled elsewhere, bypass text extraction"
                            return true
                        }
                    };
                    margins = {
                        top: 80,
                        bottom: 60,
                        left: 40,
                        width: 522
                    };
                    // all coords and widths are in jsPDF instance's declared units
                    // 'inches' in this case
                    pdf.fromHTML(
                    source, // HTML string or DOM elem ref.
                    margins.left, // x coord
                    margins.top, { // y coord
                        'width': margins.width, // max width of content on PDF
                        'elementHandlers': specialElementHandlers
                    },

                    function (dispose) {
                        // dispose: object with X, Y of the last line add to the PDF 
                        //          this allow the insertion of new lines after html
                        pdf.save('AppointmentHistory.pdf');
                    }, margins);
                }
            </script> -->
           <!-- End Print PDF -->
                          
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
